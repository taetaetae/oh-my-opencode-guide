# 베스트 프랙티스

Oh-My-OpenCode를 **10배 더 효과적으로** 사용하는 방법을 알아봅니다.

## 🎯 핵심 원칙

### 1. 적절한 모드 선택

| 상황 | 추천 모드 | 이유 |
|------|----------|------|
| 간단한 버그 수정 | Ultrawork (`ulw`) | 빠른 실행, 오버헤드 없음 |
| 새 기능 개발 | Prometheus (`Tab`) | 요구사항 명확화 필요 |
| 리팩토링 | Ultrawork + `/refactor` | 명확한 목표, 빠른 실행 |
| 아키텍처 변경 | Prometheus → Oracle 상담 | 신중한 계획 필요 |

::: tip 모드 선택 기준
**"요구사항이 명확한가?"**
- 명확하다 → Ultrawork
- 불명확하다 → Prometheus (인터뷰로 명확화)
:::

### 2. 에이전트 비용 최적화

```
비용 효율 순서:
Explore (무료) > Librarian (저렴) > Sisyphus-Junior (중간) > Oracle (비쌈)
```

**비용 절약 팁:**
- 코드 탐색은 항상 **Explore** 먼저
- 간단한 질문에 Oracle 사용 금지
- 병렬 처리로 시간 단축 = 비용 절약

### 3. 컨텍스트 관리

::: warning 컨텍스트 오염 주의
긴 세션에서 AI가 이전 맥락과 혼동할 수 있습니다.
:::

**해결책:**
```bash
# 새 작업 시작 시 새 세션 권장
# 또는 명확한 구분자 사용
---
새로운 작업: 인증 시스템 구현
이전 작업과 무관합니다.
---
```

---

## 🚀 상황별 최적 워크플로우

### 버그 수정

```
1. analyze 모드로 문제 파악
   "analyze 이 에러가 왜 발생하는지 분석해줘"

2. Explore로 관련 코드 탐색
   → 자동으로 Explore 에이전트 활용

3. 수정 및 테스트
   "수정하고 테스트 실행해줘"
```

### 새 기능 개발

```
1. Tab 키로 Prometheus 진입
2. 인터뷰 응답 (요구사항 명확화)
3. /start-work로 실행
4. 결과 검토 및 피드백
```

### 대규모 리팩토링

```
1. /init-deep으로 코드베이스 문서화
2. Oracle에게 아키텍처 상담
   "이 구조의 문제점과 개선 방향을 분석해줘"
3. /refactor로 단계별 실행
4. 각 단계마다 테스트 확인
```

---

## 💡 에이전트 활용 팁

### Explore - 무료로 최대한 활용

```bash
# 병렬로 여러 탐색 동시 실행
"인증 관련 코드 찾아줘"
"API 엔드포인트 목록 보여줘"
"테스트 파일 구조 파악해줘"
# → 3개가 동시에 실행됨
```

### Librarian - 외부 지식 활용

```bash
# 라이브러리 사용법 질문
"React Query v5의 useMutation 사용법 알려줘"
# → 공식 문서 + GitHub 예제 검색

# 베스트 프랙티스 질문
"Next.js 14에서 서버 컴포넌트 패턴 알려줘"
```

### Oracle - 어려운 문제만

::: danger Oracle 남용 금지
Oracle은 비용이 높습니다. 다음 상황에서만 사용하세요:
- 복잡한 아키텍처 결정
- 해결이 안 되는 버그
- 성능 최적화 전략
:::

```bash
# 좋은 사용 예
"이 시스템의 확장성 병목을 분석하고 개선안을 제시해줘"

# 나쁜 사용 예 (Explore로 충분)
"이 함수가 어디서 호출되는지 찾아줘"
```

---

## ⚙️ 프로젝트 설정 최적화

### AGENTS.md 활용

프로젝트 루트에 `AGENTS.md`를 만들면 AI가 자동으로 읽습니다:

```markdown
# 프로젝트 컨텍스트

## 아키텍처
- Next.js 14 App Router
- Prisma + PostgreSQL
- NextAuth.js 인증

## 코딩 컨벤션
- 함수형 컴포넌트만 사용
- Tailwind CSS 사용
- 한국어 주석 금지

## 중요 파일
- `src/lib/auth.ts` - 인증 설정
- `src/lib/db.ts` - DB 연결
```

### 디렉토리별 AGENTS.md

```
src/
├── AGENTS.md           # 전체 src 규칙
├── components/
│   └── AGENTS.md       # 컴포넌트 규칙
├── api/
│   └── AGENTS.md       # API 규칙
```

::: tip 계층적 컨텍스트
`/init-deep` 명령어로 자동 생성할 수 있습니다.
:::

### Rules 파일 활용

`.opencode/rules/` 폴더에 규칙 파일 추가:

```markdown
<!-- .opencode/rules/typescript.md -->
# TypeScript 규칙

- any 타입 사용 금지
- 모든 함수에 반환 타입 명시
- interface보다 type 선호
```

---

## 🔧 커스텀 스킬 만들기

반복되는 작업 패턴을 스킬로 만들어 재사용:

```jsonc
// .opencode/oh-my-opencode.json
{
  "skills": {
    "my-api-skill": {
      "description": "우리 프로젝트 API 개발 규칙",
      "instructions": [
        "모든 API는 /api/v1/ 경로 사용",
        "응답은 { success, data, error } 형식",
        "에러 코드는 errors.ts에 정의된 것만 사용"
      ]
    }
  }
}
```

사용:
```bash
"my-api-skill 스킬로 사용자 목록 API 만들어줘"
```

---

## 🚫 피해야 할 패턴

### ❌ 모호한 요청

```bash
# 나쁜 예
"코드 좀 개선해줘"
"버그 고쳐줘"

# 좋은 예
"이 함수의 시간 복잡도를 O(n)으로 개선해줘"
"로그인 시 발생하는 401 에러 수정해줘"
```

### ❌ 컨텍스트 없는 요청

```bash
# 나쁜 예
"테스트 추가해줘"

# 좋은 예
"UserService.createUser 함수에 대한 단위 테스트 추가해줘.
 - 성공 케이스
 - 중복 이메일 에러 케이스
 - 유효성 검증 실패 케이스"
```

### ❌ 한 번에 너무 많은 요청

```bash
# 나쁜 예
"인증 시스템 만들고, 대시보드 페이지 만들고, API 문서화해줘"

# 좋은 예
"인증 시스템부터 만들어줘. 완료되면 다음 단계 진행할게"
```

---

## 📊 생산성 측정

### 효과적인 사용 지표

| 지표 | 좋은 상태 | 개선 필요 |
|------|----------|----------|
| 첫 응답까지 시간 | < 30초 | > 2분 |
| 재요청 횟수 | 0-1회 | 3회 이상 |
| Oracle 사용 빈도 | 주 1-2회 | 매일 |
| 세션당 완료 작업 | 3-5개 | 1개 미만 |

### 개선 방법

1. **재요청이 많다면** → 요청을 더 구체적으로
2. **Oracle을 자주 쓴다면** → Explore/Librarian 먼저 시도
3. **작업 완료가 느리다면** → Prometheus로 계획 먼저

---

## 📚 다음 단계

- [팁과 트릭](/guide/tips-and-tricks) - 숨겨진 기능과 단축키
- [문제 해결](/guide/troubleshooting) - 자주 발생하는 문제와 해결법
